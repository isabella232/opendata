<?php

/**
 * @file
 * Adds avoindata guide functionality.
 */

use Drupal\node\Entity\Node;

/**
 * Installs guide configuration.
 *
 * These changes only take effect when the module is completely reinstalled.
 */
function avoindata_guide_install() {
  $node = Node::create([
    'type' => 'avoindata_guide_page',
    'langcode' => 'fi',
    'created' => \Drupal::time()->getRequestTime(),
    'changed' => \Drupal::time()->getRequestTime(),
    'uid' => 1,
    'title' => 'Oppaan etusivu. ',
    'field_content' => 'Oppaan etusivun sisÃ¤ltÃ¶',
  ]);
  $node->save();
  \Drupal::service('path.alias_storage')->save("/node/" . $node->id(), "/opas", "fi");

  // English translation.
  $node_en = $node->addTranslation('en');
  $node_en->title = 'Guide frontpage';
  $node_en->field_content = 'Guide frontpage content';
  $node_en->save();
  \Drupal::service('path.alias_storage')->save("/node/" . $node->id(), "/guide", "en");

  // Swedish translation.
  $node_sv = $node->addTranslation('sv');
  $node_sv->title = 'Guide startsidan';
  $node_sv->field_content = 'Guide innehÃ¥ll';
  $node_sv->save();
  \Drupal::service('path.alias_storage')->save("/node/" . $node->id(), "/guide", "sv");

}
